CREATE TABLE ACTIVITY (
  Aname     VARCHAR(255)  NOT NULL PRIMARY KEY,
  Adate     DATE          NOT NULL,
  startTime TIME          NOT NULL,
  length    VARCHAR(255)  NOT NULL
);

CREATE TABLE SECTION (
  secNumber       INT           UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
  secName         VARCHAR(255)  NOT NULL,
  amountOfSeats   INT           UNSIGNED NOT NULL DEFAULT 0
);

CREATE TABLE SEATS (
  secNumber       INT         UNSIGNED NOT NULL,
  seatID          INT         UNSIGNED AUTO_INCREMENT NOT NULL,
  seatNumber      INT         UNSIGNED NOT NULL,
  price           FLOAT       UNSIGNED DEFAULT 0.00,
  CONSTRAINT CHK_Seat CHECK (seatNumber >= 1),
  PRIMARY KEY (secNumber, seatNumber, seatID),
  FOREIGN KEY (secNumber) REFERENCES SECTION(secNumber),
);

CREATE TABLE TIXHOLDER (
  phoneNum      VARCHAR(10)     NOT NULL PRIMARY KEY,
  Pname         VARCHAR(255)    NOT NULL,
  dob           DATE            NOT NULL,
  address       VARCHAR(255)    NOT NULL,
  activityName  VARCHAR(255)    NOT NULL,
  seatNum       INT             NOT NULL,
  FOREIGN KEY (activityName) REFERENCES ACTIVITY(Aname),
  FOREIGN KEY (seatNum) REFERNCES SEATS(seatNumber),
);

CREATE TABLE ATTENDS (
  phoneNum      VARCHAR(10)  NOT NULL,
  activityName  VARCHAR(255) NOT NULL,
  FOREIGN KEY (phoneNum) REFERENCES TIXHOLDER(phoneNum),
  FOREIGN KEY (activityName) REFERENCES ACTIVITY(Aname),
  PRIMARY KEY (phoneNum, activityName),
);

CREATE TABLE BUYS (
  phoneNum    VARCHAR(10)   NOT NULL,
  ID          INT           NOT NULL,
  seatNum     INT           NOT NULL,
  secNumber   INT           NOT NULL,
  FOREIGN KEY (phoneNum) REFERENCES TIXHOLDER(phoneNum),
  FOREIGN KEY (ID) REFERENCES SEATS(ID),
  FOREIGN KEY (seatNum) REFERENCES SEATS(seatNum),
  PRIMARY KEY (phoneNum, ID, seatNum, secNumber)
);
